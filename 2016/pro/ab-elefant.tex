\task{$(a,b)$--слоны}

\begin{enumerate}

\item \begin{itemize}
\item[(а)] Выпишем изменения координат, которые происходят при ходе. 
Cлон в первой части хода двигается на $a$ клеток 
в одном из четырёх направлений: $(-a,a), (a,-a), (-a,-a), (a,a)$. Во втором 
движении он поворачивает на $90^\circ$ и двигается ещё на $b$ клеток в одном
из двух направлений: $(-a-b,a-b), (-a+b,a+b), \ldots$ и т.п.

Так как $a\ne b$, то каждая из сумм $a+b$, $a-b$, $-a-b$ и $-a+b$ будет отличаться
от других. Итого, все 8 вариантов хода различны.

\item[(б)] Да, $(a,b)$-слон тождественен $(b,a)$-слону. Рассмотрим всё множество точек,
в которые мы можем прийти: это все комбинации плюсов и минусов вида
$(\pm a \pm b, \pm a \pm b)$, за исключением
вариантов вида $(\pm (a+b), \pm (a+b))$ и $(\pm (a-b), \pm (a-b))$
--- иными словами, кроме тех вариантов, где во втором движении слон идёт в направлении
первого движения или в обратном направлении. Легко заметить, что от обмена
$a$ и $b$ это множество не поменяется.

\item[(в)] Обычный слон в некоторых положениях бьёт 13 клеток, поэтому в точном смысле он
не может являться никаким $(a,b)$-слоном, у которого только 8 вариантов хода. Однако,
если рассмотреть $(1,0)$-слона, то множество полей, которые он способен в принципе достичь,
совпадает с множеством для обычного слона.
\end{itemize}

\item Чёрные клетки --- клетки, у которых сумма координат чётна. Тогда давайте
назовём \emph{линейными} чёрными клетками те клетки, обе координаты которых чётны. 
Остальные чёрные клетки назовём \emph{точечными}. 

Если взять $(1,0)$-слона, то если $x$ и $y$ --- чётны, то $x \pm 1$ и $y \pm 1$ нечётны,
и наоборот.

\begin{center}\tikz[scale=0.7]{
    \draw[thick] (0,0) rectangle (4,4);
    \foreach \x/\y in {0/0,0/2,2/0,2/2} {
        \fill[pattern = horizontal lines] (\x,\y) rectangle (\x+1,\y+1);
    }
    \foreach \x/\y in {1/1,1/3,3/1,3/3} {
        \fill[pattern = dots] (\x,\y) rectangle (\x+1,\y+1);
    }
    \draw (0,0) grid (4,4);
    \foreach \y [count=\n] in {0,1,2,3} {
        \draw (0,\n-0.5) node [left] {$\y$};
    }
    \foreach \y [count=\n] in {0,1,2,3} {
        \draw (\n-0.5,0) node [below] {$\y$};
    }
    %\fill (1.5,7.5) circle[radius=0.1];
}\end{center}

Для того, чтобы $(a,b)$-слон ходил только по линейным (точечным)
чёрным клеткам, нужно, чтобы он сохранял чётность каждой из координат.
То есть, $(a+b) \divsby 2$ и $(a-b) \divsby 2$. Заметим, что оба условия
выполняются или не выполняются одновременно, то есть в качестве требуемого
свойства мы можем выбрать, например, $(a+b) \divsby 2$.

Если же $(a+b)$ не кратно 2, то такой слон будет менять чётность координат
(и тип чёрных клеток) при каждом ходе.

\item Если чёрных у полей общая вершина, то, значит, это чёрные клетки разного
типа. Рассмотрим два случая:

Если же $(t+1) \divsby 2$, то (по предыдущему пункту) такой $(1,t)$-слон 
не может побывать в чёрных клетках разного типа. 

Теперь, пусть $t \divsby 2$. Тогда из следующей суммы легко понять ходы слона,
которые позволяют дойти от точки $(x,y)$ до $(x+1,y+1)$. Другие соседние клетки ---
$(x \pm 1, y \pm 1)$ --- можно получить аналогично, в силу симметрии слона и 
поля.
$$(x,y) + (1+t,1-t) + (\frac{t}{2}) ((-1+t,1+t) + (-1-t,1-t)) = \\
= (x+(1+t)-t, y+(1-t)+t) = (x+1,y+1)$$

\item Пусть слон достигает клетки $(\pm 1,\pm 1)$ из клетки $(0,0)$.
Без уменьшения общности давайте считать, что слон достигает клетки $(1,1)$, 
поскольку мы всегда можем отразить поле и ходы по горизонтали и вертикали.

Поскольку любой ход
слона осуществляет переход от координат $(x,y)$ в координаты 
$(x \pm a \pm b, y \pm a \pm b)$, то любая координата, которая может быть получена
в ходе перемещений слона будет иметь вид $(x + p\gcd(a,b), y + q\gcd(a,b))$.
Очевидно, что если достижимо поле $(1,1)$, то $\gcd(a,b) = 1$.

\item Покажем, что мы всегда можем достигнуть клетки $(1,1)$ из $(0,0)$,
если выполнены два условия: (а) $\gcd(a,b)=1$ и (б) $(a+b)$ не делится на 2.

Для начала покажем, что существует такой нечётный $s$, что из поля $(0,0)$ 
достижимо поле $(1,s)$.
То есть, существуют коэффициенты $t_1, \ldots, t_4$, что 
$$t_1 (a+b,a-b) + t_2 (a-b,a+b) + t_3 (a+b,-a+b) + t_4 (a-b,-a-b) = (1,s)$$
(если коэффициент $t_i$ отрицателен, то мы берём противоположный ход и делаем
его $-t_i$ раз).

В данном уравнении нас не интересют правые части, только левые, поэтому мы
можем свести его к такому:
$$t_1 (a+b) + t_2 (a-b) + t_3 (a+b) + t_4 (a-b) = 1$$

Заметим, что по теореме Безу найдутся такие $p$ и $q$, что $pa + qb = 1$.
Это соотношение приводит нас к системе:
$$\begin{array}{l}
p = t_1 + t_2 + t_3 + t_4\\
q = t_1 - t_2 + t_3 - t_4
\end{array}$$

Без уменьшения общности можем положить $t_3 = t_4 = 0$, и взять
$t_1 = \frac{p+q}{2}$ и $t_2 = \frac{p-q}{2}$.
Заметим, что мы можем подобрать такие $p$ и $q$, что оба будут нечётными,
что сделает $t_1$ и $t_2$ целыми.

В самом деле, заметим, что $p$ или $q$ нечётно
(иначе сумма $pa + qb$ чётна и потому не может равняться 1).
Пусть, тем не менее, какое-то число из них чётно --- например, $q$. 
Раз так, то $p$ и $a$ нечётны (иначе сумма $pa+qb$ чётна). 
Поскольку же по условию $a+b$ нечётно, то $b$ чётно. 
И тогда числа $p'=p+b$ и $q'=q-a$ оба нечётные,
но $p'a + q'b = 1$.

Теперь заметим, что вторая координата перемещения, $s$, также нечётна:
$$s = \frac{p+q}{2} (a-b) + \frac{p-q}{2} (a+b) = \frac{ap+aq-bp-bq+ap-aq+bp-bq}{2} = ap-bq$$
В самом деле, раз $ap+bq$ нечётно, то и $ap-bq$ нечётно.

Итак, мы можем, сделав $\frac{p+q}{2}$ ходов $(a+b,a-b)$ и
$\frac{p-q}{2}$ ходов $(a-b,a+b)$, достигнуть точки $(1,ap-bq)$.



\end{enumerate}