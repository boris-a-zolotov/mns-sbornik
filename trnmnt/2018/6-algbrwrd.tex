\task{Геометрия и алгебра слов}

Рассмотрим некоторое конечное множество $A = \{a_1,a_2, \ldots, a_m\}$, которое будем называть алфавитом. Для каждого элемента $a\in A$ введём дополнительно символ $a^{-1}$. Множество всх таких символов обозначим за $A^{-1}$. Теперь определим расширенный алфавит $\text{Ҩ} = A\cup A^{-1}$. Тем самым можно рассмотреть набор 
$$\text{Ҩ}^* = \{\varepsilon, a_1, a_2, \ldots, a_1^{-1}, a_2^{-1},\ldots, a_1a_1, a_1a_2, \ldots, a_1 a_1^{-1}, a_1a_2^{-1}, \ldots\}$$ всех слов, которые можно получить из букв алфавита $\text{Ҩ}$, где $\varepsilon$ --- пустое слово длины ноль. На этом наборе определена операция приписывания слов, которую можно рассматривать как функцию $\text{Ҩ}^*\times \text{Ҩ}^* \to \text{Ҩ}^*$. Например, $abaa\cdot ba = abaaba$. Коротко будем записывать $a^n = a\cdot \ldots \cdot a$ ($n$ раз).

Зафиксируем некоторый набор изометрий $X = \{x_1, x_2, \ldots, x_m\} \subseteq {\rm Isom}(\text{\bf R}^n)$ пространства $\text{\bf R}^n$. Мы можем компонировать данные изометрии между собой: $xy:= x \circ y$. Для каждой изометрии $x\in X$ по--определению есть обратное отображение $x^{-1}$, которое тоже будет изометрией. 
Теперь определена функция
$f_X: \text{Ҩ}^* \longrightarrow {\rm Isom}(\text{\bf R}^n),$
которая действует следующим образом: буквам $a_i$ сопоставляются изометрии $x_i$, буквам $a_i^{-1}$ сопоставляются изометрии $x_i^{-1},$ пустому слову $\varepsilon$ сопоставляется тождественное отображение ${\rm id}$, а образ длинного слова вычисляется по рекуррентному правилу $f_X(w_1w_2)=f_X(w_1)\cdot f_X(w_2)$.

\begin{center}
\begin{tabular}{|c|}
\hline
	\begin{minipage}{0.85\textwidth}
\medskip
На геометрическом уровне некоторые получающиеся слова будут совпадать. Например, если $x,y$ --- это переносы на векторы $(1,0)$ и $(0,1)$ в $\text{\bf R}^2$, то изометрии $xy$ и $yx$ равны. Кроме того, если $z,w$ --- это отражение относительно начала координат и поворот против часовой стрелки на $\text{π}/2$ относительно нуля, то $zx \neq xz$, $z^2 = w^4 = {\rm id}$ и $y^{-1}wx = {\rm id}$. Таким образом, некоторые слова в получающемся языке должны интерпретироваться как совпадающие. Будем говорить, что два слова $u,v \in \text{Ҩ}^*$ являются $X$--эквивалентными, если $f_X(u)=f_X(v)$. Через $W_X$ обозначается фактормножество множества $\text{Ҩ}^*$ по получающемуся отношению эквивалентности (такое множество однозначно задаётся каким--нибудь полным набором из попарно неэквивалентных слов, то есть таким набором, что любое слово $v \in \text{Ҩ}^*$ эквивалентно слову из него, но никакие два разных слова из в наборе друг другу не эквивалентны).
\begin{enumerate} \setcounter{enumi}{-1}
\item Докажите, что $X$--эквивалентность является отношением эквивалентности на $\text{Ҩ}^*$.
\end{enumerate} \smallskip
	\end{minipage} \\
\hline
\end{tabular}
\end{center}

\ \\

\begin{center}
\begin{tabular}{|c|}
\hline
	\begin{minipage}{0.85\textwidth}
\medskip
Через $R \subseteq \text{Ҩ}^*$ будем обозначать какой-то фиксированный набор слов, а слова из $R$ будем называть {\it пустыми} (на геометрическом уровне пустые слова будут отвечать тождественным изометриям). 
Будем говорить, что два слова $w,u \in \text{Ҩ}^*$ являются $R$--эквивалентными и писать $u \equiv v$, 
%$"$отличаются на пустое слово$"$, 
если $u$ можно получить из $w$ с помощью многократного применения следующей операции: между любыми двумя буквами слова $w$ (или с краю) можно вставить (приписать) любое слово из $\overline{R}:=R\cup\{\varepsilon\}\cup \{aa^{-1} \mid a \in A\} \cup \{a^{-1}a \mid a \in A\}$, а также из слова $w$ можно вычеркнуть отрезок (часть), равный одному из слов в $\overline{R}$. Считается, что если вычеркнуть из слова само слово, то останется слово длины ноль, т.е. $\varepsilon$. 
%Два слова будем называть одинаковыми и писать $u \equiv v$, если они отличаются на пустое слово. 
Через $\langle \text{Ҩ} \mid R \rangle$ обозначается фактормножество $\text{Ҩ}^*$ по такому отношению эквивалентности.
%какой--нибудь полный набор из попарно $R$--неэквивалентных слов в $\text{Ҩ}^*$. 
$\vspace{-0.2cm}$ \begin{enumerate} \setcounter{enumi}{-1}
\item Докажите, что $R$--эквивалентность является отношением эквивалентности на $\text{Ҩ}^*$ и проверьте, что если $u,v,w,w' \in \text{Ҩ}^*$ и $w \equiv w'$, то $uwv \equiv uw'v$.
\end{enumerate} \smallskip
	\end{minipage} \\
\hline
\end{tabular}
\end{center}

В этой задаче предлагается изучить алгебраические аспекты изометрий, в основном возникающих как движения (чаще, отражения) из
$$Fix(\Phi) := \{ \varphi \in {\rm Isom}(\text{\bf R}^n) \mid \varphi(\Phi) = \Phi\},$$
сохраняющие данную геометрическую фигуру $\Phi$ в $\text{\bf R}^n$.
\begin{enumerate}
\item Пусть $A = \{a,b\}$ и $R = \{a^2, b^2, abab\}$. Тогда, например, $bab \equiv aabab \equiv a \equiv abb \equiv \varepsilon a\varepsilon b\varepsilon b\varepsilon.$
\begin{enumerate}
\item Докажите, что любое слово из $\text{Ҩ}^*$, в действительности, $R$--экви- валентно одному из слов из $\{\varepsilon, a, b, ab\}$.
\item Найдите пару $(X=\{x,y\}, f_X)$ из двух изометрий $x,y \neq {\rm id}$ и функции $f_X: \text{Ҩ}^* \to {\rm Isom}(\text{\bf R}^n)$, для которой отношения $R$-- и $X$--экви- валентности совпадают. Можно ли выбрать $x,y \in Fix(\Phi)$ для подходящей фигуры $\Phi$ и в какой наименьшей размерности?
\item Докажите, что слова $\varepsilon, a,b,ab$ все попарно $R$--неэквивалентны.
\end{enumerate}
\item Пусть $X = \{x,y\}$, где $x,y$ --- это нетривиальный перенос на вектор $(1,0)$ и нетривиальная скользящая симметрия в перпендикулярном направлении соответственно.
\begin{enumerate}
\item Докажите, что $xyx = y$, то есть $xyxy^{-1} = {\rm id}$.
\item Пусть $A = \{a,b\}$ и $R = \{abab^{-1}\} \subseteq \text{Ҩ}^*$. Определена функция $f_X$, переводящая $a,b$ в $x,y$ и продолжающаяся на все слова алфавита $\text{Ҩ}$ по установленным в условии правилам.
Докажите, что отношения $R$-- и $X$--эквивалентности совпадают. 
\end{enumerate}
\item Рассмотрим квадратную табличку из $m\times m$ натуральных чисел $d_{i,j} \geq 2$, среди которых может встретиться символ $\infty$. Построим по ней граф $\Gamma = (V,E)$, в котором $V=\{r_1, r_2, \ldots, r_m\}$, а вершины $r_i,r_j$ соединены ребром в том и только в том случае, когда $d_{i,j}\geq 3$ (включая $\infty$). В вершинах графа $\Gamma$ изображаются числа $d_{i,i}$, а число $d_{i,j}$ рисуется на ребре $(r_i, r_j)$ в том и только в том случае, когда $d_{i,j}\geq 4$ (включая $\infty$). Этими условиями исходная таблица восстанавливается по графу однозначно. Пусть $A = V$, а $R \subseteq \text{Ҩ}^*$ всех слов вида $(r_ir_j)^{d_{i,j}}$, где $i \neq j$, и всех слов вида $r_i^{d_{i,i}}$. Если $d_{i,j} = \infty$, то соответствующее слово не входит в $R$.
Будем обозначать $G_\Gamma := \langle \text{Ҩ} \mid R \rangle$. Решения дальнейших вопросов интересны даже при малых $m$.
\begin{enumerate}
\item Опишите $G_\Gamma$ для графа с одной вершиной с $d_{1,1} = n$, где $n \geq 2$.
Найдите такую изометрию $a$, для которой $a^{k} \neq {\rm id}$ при $1 \leq k < n$ но $a^n = {\rm id}$. В частности, найдите пару $(X,f_X)$, для которой отношения $R$-- и $X$--эквивалентности совпадают.
\item Опишите $G_\Gamma$ для графа с $n$ изолированными вершинами, где $d_{i,i} = 2$, и найдите пару $(X,f_X)$, для которой отношения $R$-- и $X$--эквивалентности совпадают. А что, вообще, происходит с алфавитом при взятии дюзъюнктного объединения графов?
\item Опишите $G_\Gamma$ для графа ниже ($n \geq 2$ или $n=\infty$) и найдите пару $(X,f_X)$, для которой отношения $R$-- и $X$--эквивалентности совпадают.

\begin{center}
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=4cm,
                thick,main node/.style={circle,draw,font=\Large\bfseries}]

  \node[main node] (1) {2};
  \node[main node] (2) [right of=1] {2};
  \path
    (1) edge node[above] {n} (2);
\end{tikzpicture}
\end{center}
\item Решите аналогичную задачу для графа
\begin{center}
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=4cm,
                thick,main node/.style={circle,draw,font=\Large\bfseries}]

  \node[main node] (1) {2};
  \node[main node] (2) [right of=1] {2};
  \node[main node] (3) [right of=2] {2};
  \path
    (1) edge node[above] {} (2);
  \path
    (2) edge node[above] {} (3);
\end{tikzpicture}
\end{center}
\item Более общо, решите аналогичную задачу для графа из $n$ вершин, являющегося простой ломаной.
\begin{center}
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=2cm,
                thick,main node/.style={circle,draw,font=\Large\bfseries}]

  \node[main node] (1) {2};
  \node[main node] (2) [right of=1] {2};
  \node[main node] (3) [right of=2] {2};
  \node[main node] (4) [right of=3] {2};
\path
    (1) edge node[above] {} (2);
  \path
    (2) edge node[above] {} (3);
  \path
    (3) edge node[above] {} (4);
\end{tikzpicture}
\end{center}
\end{enumerate}

\item По графу $\Gamma$ построим квадратичную форму на $\text{\bf R}^m$
\begin{align*}
Q_\Gamma(x_1, \ldots, x_m) = \sum_{i=1}^m x_i^2 - \sum_{(i,j)\in E} x_i x_j.
\end{align*}
Найдите соответствующие квадратичные формы для графов из предыдущих пунктов и исследуйте их на положительную определённость. Докажите, что если квадратичная форма $Q_\Gamma$ является положительно определённой, то граф $\Gamma$
\begin{enumerate}
\item не содержит циклов
\item не содержит вершин степени $4$ и больше
\item содержит не более одной вершины степени $3$
\end{enumerate}
Что ещё можно сказать про граф $\Gamma$, если соответствуюшая форма положительно определена?
\item Рассмотрите граф ниже и найдите пару $(X,f_X)$, для которой отношения $R$-- и $X$--эквивалентности совпадают.
\begin{center}
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=4cm,
                thick,main node/.style={circle,draw,font=\Large\bfseries}]

  \node[main node] (1) {2};
  \node[main node] (2) [right of=1] {2};
  \node[main node] (3) [right of=2] {2};
  \path
    (1) edge node[above] {4} (2);
  \path
      (2) edge node[above] {} (3);
\end{tikzpicture}
\end{center}
Исследуйте ситуацию, при которой такой граф состоит из $n$ вершин и продолжается вправо ребрами с $d_{i,i+1} = 3$, $i \geq 2$.
\end{enumerate}