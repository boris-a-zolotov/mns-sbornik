\task{Дорога до метро}

\def\mygrid{
	\foreach \x in {-6,...,6} {
		\draw[color={rgb:black,4;white,6}] (\x*0.3, -1.9) -- (\x *0.3, 1.9);
		\draw[color={rgb:black,4;white,6}] (-1.9, \x*0.3) -- (1.9, \x *0.3);
	};}

\def\okrest#1{
\tikz{\mygrid;
	\foreach \x / \y in {#1}
		\filldraw[fill=white,draw=black,very thick]
			(0.075cm +0.3*\x cm,0.3*\y cm) arc (0:360:0.075) -- cycle;
	\filldraw[fill=black,very thick] (0.075,0) arc (0:360:0.075) -- cycle;
}}

\begin{enumerate}

\item Нас интересуют точки, сумма смещений которых по горизонтали и по вертикали относительно выбранного узла не превосходит 4. Множество этих точек выглядит так:

\begin{center}
\okrest{-4 / 0, -3 / -1, -3 / 0, -3 / 1, -2 / -2, -2 / -1, -2 / 0,
	-2 / 1, -2 / 2, -1 / -3, -1 / -2, -1 / -1, -1 / 0, -1 / 1, -1 / 2, -1 / 3,
	0 / -4, 0 / -3, 0 / -2, 0 / -1, 0 / 0, 0 / 1, 0 / 2, 0 / 3, 0 / 4,
	1 / -3, 1 / -2, 1 / -1, 1 / 0, 1 / 1, 1 / 2, 1 / 3, 2 / -2, 2 / -1,
	2 / 0, 2 / 1, 2 / 2, 3 / -1, 3 / 0, 3 / 1, 4 / 0}
\end{center}

\item Если определять длину пути как максимум из смещений, то в 4--окрестности будут лежать точки, каждая координата которых отличается от соответствующей координаты выбранной не более чем на 4.

Если же определять её как минимум, то в окрестность попадут точки, хотя бы одна из координат которых отличается от координаты исходной не более чем на 4 — получится крест, лучи которого продолжаются бесконечно далеко по горизонтали и вертикали.

\begin{multicols}{2}[ ]
Максимум:
\begin{center}
\okrest{-4 / -4, -4 / -3, -4 / -2, -4 / -1, -4 / 0, -4 / 1, -4 / 2, -4 / 3,
	-4 / 4, -3 / -4, -3 / -3, -3 / -2, -3 / -1, -3 / 0, -3 / 1, -3 / 2,
	-3 / 3, -3 / 4, -2 / -4, -2 / -3, -2 / -2, -2 / -1, -2 / 0, -2 / 1,
	-2 / 2, -2 / 3, -2 / 4, -1 / -4, -1 / -3, -1 / -2, -1 / -1, -1 / 0,
	-1 / 1, -1 / 2, -1 / 3, -1 / 4, 0 / -4, 0 / -3, 0 / -2, 0 / -1,
	0 / 0, 0 / 1, 0 / 2, 0 / 3, 0 / 4, 1 / -4, 1 / -3, 1 / -2, 1 / -1,
	1 / 0, 1 / 1, 1 / 2, 1 / 3, 1 / 4, 2 / -4, 2 / -3, 2 / -2, 2 / -1,
	2 / 0, 2 / 1, 2 / 2, 2 / 3, 2 / 4, 3 / -4, 3 / -3, 3 / -2, 3 / -1,
	3 / 0, 3 / 1, 3 / 2, 3 / 3, 3 / 4, 4 / -4, 4 / -3, 4 / -2, 4 / -1,
	4 / 0, 4 / 1, 4 / 2, 4 / 3, 4 / 4}
\end{center}

\ \\ [-0.05 in]
Минимум:
\begin{center}
\okrest{-6 / -4, -6 / -3, -6 / -2, -6 / -1, -6 / 0, -6 / 1, -6 / 2, -6 / 3, -6 / 4,
	-5 / -4, -5 / -3, -5 / -2, -5 / -1, -5 / 0, -5 / 1, -5 / 2, -5 / 3, -5 / 4,
	-4 / -6, -4 / -5, -4 / -4, -4 / -3, -4 / -2, -4 / -1, -4 / 0, -4 / 1, -4 / 2,
	-4 / 3, -4 / 4, -4 / 5, -4 / 6, -3 / -6, -3 / -5, -3 / -4, -3 / -3, -3 / -2,
	-3 / -1, -3 / 0, -3 / 1, -3 / 2, -3 / 3, -3 / 4, -3 / 5, -3 / 6, -2 / -6,
	-2 / -5, -2 / -4, -2 / -3, -2 / -2, -2 / -1, -2 / 0, -2 / 1, -2 / 2, -2 / 3,
	-2 / 4, -2 / 5, -2 / 6, -1 / -6, -1 / -5, -1 / -4, -1 / -3, -1 / -2, -1 / -1,
	-1 / 0, -1 / 1, -1 / 2, -1 / 3, -1 / 4, -1 / 5, -1 / 6, 0 / -6, 0 / -5, 0 / -4,
	0 / -3, 0 / -2, 0 / -1, 0 / 0, 0 / 1, 0 / 2, 0 / 3, 0 / 4, 0 / 5, 0 / 6,
	1 / -6, 1 / -5, 1 / -4, 1 / -3, 1 / -2, 1 / -1, 1 / 0, 1 / 1, 1 / 2, 1 / 3,
	1 / 4, 1 / 5, 1 / 6, 2 / -6, 2 / -5, 2 / -4, 2 / -3, 2 / -2, 2 / -1, 2 / 0,
	2 / 1, 2 / 2, 2 / 3, 2 / 4, 2 / 5, 2 / 6, 3 / -6, 3 / -5, 3 / -4, 3 / -3,
	3 / -2, 3 / -1, 3 / 0, 3 / 1, 3 / 2, 3 / 3, 3 / 4, 3 / 5, 3 / 6, 4 / -6,
	4 / -5, 4 / -4, 4 / -3, 4 / -2, 4 / -1, 4 / 0, 4 / 1, 4 / 2, 4 / 3, 4 / 4,
	4 / 5, 4 / 6, 5 / -4, 5 / -3, 5 / -2, 5 / -1, 5 / 0, 5 / 1, 5 / 2, 5 / 3,
	5 / 4, 6 / -4, 6 / -3, 6 / -2, 6 / -1, 6 / 0, 6 / 1, 6 / 2, 6 / 3, 6 / 4}
\end{center}
\end{multicols}

Наконец, если длина пути определена как модуль разности смещений, то в 4--окрестность попадут точки, лежащие на расстоянии не более четырёх от двух диагоналей, проходящих через выбранный узел:

\begin{center}
\okrest{-6 / -6, -6 / -5, -6 / -4, -6 / -3, -6 / -2, -6 / 2, -6 / 3, -6 / 4,
	-6 / 5, -6 / 6, -5 / -6, -5 / -5, -5 / -4, -5 / -3, -5 / -2, -5 / -1,
	-5 / 1, -5 / 2, -5 / 3, -5 / 4, -5 / 5, -5 / 6, -4 / -6, -4 / -5,
	-4 / -4, -4 / -3, -4 / -2, -4 / -1, -4 / 0, -4 / 1, -4 / 2, -4 / 3,
	-4 / 4, -4 / 5, -4 / 6, -3 / -6, -3 / -5, -3 / -4, -3 / -3, -3 / -2,
	-3 / -1, -3 / 0, -3 / 1, -3 / 2, -3 / 3, -3 / 4, -3 / 5, -3 / 6,
	-2 / -6, -2 / -5, -2 / -4, -2 / -3, -2 / -2, -2 / -1, -2 / 0, -2 / 1,
	-2 / 2, -2 / 3, -2 / 4, -2 / 5, -2 / 6, -1 / -5, -1 / -4, -1 / -3,
	-1 / -2, -1 / -1, -1 / 0, -1 / 1, -1 / 2, -1 / 3, -1 / 4, -1 / 5,
	0 / -4, 0 / -3, 0 / -2, 0 / -1, 0 / 0, 0 / 1, 0 / 2, 0 / 3, 0 / 4,
	1 / -5, 1 / -4, 1 / -3, 1 / -2, 1 / -1, 1 / 0, 1 / 1, 1 / 2, 1 / 3,
	1 / 4, 1 / 5, 2 / -6, 2 / -5, 2 / -4, 2 / -3, 2 / -2, 2 / -1, 2 / 0,
	2 / 1, 2 / 2, 2 / 3, 2 / 4, 2 / 5, 2 / 6, 3 / -6, 3 / -5, 3 / -4,
	3 / -3, 3 / -2, 3 / -1, 3 / 0, 3 / 1, 3 / 2, 3 / 3, 3 / 4, 3 / 5,
	3 / 6, 4 / -6, 4 / -5, 4 / -4, 4 / -3, 4 / -2, 4 / -1, 4 / 0, 4 / 1,
	4 / 2, 4 / 3, 4 / 4, 4 / 5, 4 / 6, 5 / -6, 5 / -5, 5 / -4, 5 / -3,
	5 / -2, 5 / -1, 5 / 1, 5 / 2, 5 / 3, 5 / 4, 5 / 5, 5 / 6, 6 / -6,
	6 / -5, 6 / -4, 6 / -3, 6 / -2, 6 / 2, 6 / 3, 6 / 4, 6 / 5, 6 / 6}
\end{center}

\item Заметим, что длина кратчайшего пути между двумя точками в классическом смысле равна сумме его смещений по горизонтали и вертикали, так как кратчайший путь использует только одно из двух вертикальных и одно из двух горизонтальных направлений.

Значит, путь «классической» длины, не превосходящей $n$, связывает два узла из сетки тогда и только тогда, когда между этими узлами существует путь длины «в смысле первого пункта», не превосходящей $n$. Что и требовалось.

\item Всякий кратчайший путь из $A$ в $B$ будет использовать ровно $m+n$ рёбер, из которых ровно $n$ будут проходиться в направлении сверху вниз, а остальные $m$ — слева направо. Значит, для построения кратчайшего пути нам нужно выбрать те $n$ рёбер из имеющихся $m+n$, которые мы будем проходить сверху вниз. Это можно сделать
$$C_{m+n}^n = C_{m+n}^m \text{ способами.}$$

\item Пусть город состоит из шести узлов, изображённых ниже\scolon станции метро отмечены чёрными кружками. Тогда максимальное кратчайшее расстояние (равное 2) достигается в узле, отмеченном квадратом (для остальных узлов есть станция метро, находящаяся не более чем в одном шаге от них). А максимальная сумма расстояний (равная 6) достигается в узлах, отмеченных ромбиками: в остальных узлах эта сумма равна  4 или 5.

\begin{center} \tikz{
	\filldraw[fill={rgb:black,1.4;white,8.6},draw={rgb:black,4;white,6}] (-1.7,-0.2) rectangle (1.7,0.2);
	\foreach \x in {-3,...,3} \draw[thick, color={rgb:black,4;white,6}]
		(0.5*\x cm, -0.3 cm) -- (0.5*\x cm, 0.3 cm);
	\draw[thick, color={rgb:black,4;white,6}] (-1.8, 0) -- (1.8,0);
	\filldraw[fill=white,very thick]
		(-1.35,0) -- ++(-0.15,0.15) -- ++(-0.15,-0.15) -- ++(0.15, -0.15) -- cycle;
	\filldraw[fill=white,very thick]
		(1.65,0) -- ++(-0.15,0.15) -- ++(-0.15,-0.15) -- ++(0.15, -0.15) -- cycle;
	\filldraw[fill=white,very thick]
		(0.1,0.1) -- ++(-0.2,0) -- ++(0,-0.2) -- ++(0.2,0) -- cycle;
	\filldraw[fill=black] (-0.85,0) arc (0:360:0.15);
	\filldraw[fill=black] (1.15,0) arc (0:360:0.15);
} \end{center}

\colorlet{hardg}{rgb:black,4;white,6}
\colorlet{softg}{rgb:black,1.4;white,8.6}

\item Среднее расстояние до станций получается из суммы всех расстояний делением на количество станций — значит, максимума они достигают одновременно.

\item \ \\

\begin{center} \tikz{
	\foreach \x in {-2,0,2} \filldraw[fill=softg,draw=softg]
		(-0.2cm + \x cm, -1.2cm) rectangle (0.2 cm + \x cm, 1.2cm);
	\filldraw[fill=softg,draw=softg] (-2.2,-0.2) rectangle (2.2,0.2);
	\foreach \x in {-4,...,4} \draw[color=hardg] (0.5 * \x cm, -1.3 cm) -- (0.5 * \x cm, 1.3 cm);
	\foreach \x in {-2,...,2} \draw[color=hardg] (-2.3, 0.5 * \x cm) -- (2.3, 0.5 * \x cm);
	\foreach \x / \y in {-2 / 1, -2 / -1, 0 / 0, 2 / 1, 2 / -1}
		\filldraw[fill=black] (0.15cm + \x cm, \y cm) arc (0:360:0.15);
	\foreach \x in {-1.5,1.5} \filldraw[fill=white,very thick]
		(0.1cm + \x cm,0.1 cm) -- ++(-0.2,0) -- ++(0,-0.2) -- ++(0.2,0) -- cycle;
	\foreach \y in {-1,1} \filldraw[fill=white,very thick]
		(0.15,\y cm) -- ++(-0.15,0.15) -- ++(-0.15,-0.15) -- ++(0.15, -0.15) -- cycle;
} \end{center}

Рассмотрим город, изображённый на рисунке. Кратчайшее расстояние достигает своего максимума, равного 3, в узлах, отмеченных квадратами. Максимальное наибольшее расстояние, равное 12, достигается в четырёх узлах по краям города, где расположены станции.

Наконец, максимальная сумма расстояний, равная 34, достигается в узлах, отмеченных ромбиками: для того, чтобы дойти от них до станций метро, нужно всякий раз проходить по «отросткам», в конце которых расположены ромбики, что добавляет дополнительные 10 к сумме расстояний до станций.

\end{enumerate}